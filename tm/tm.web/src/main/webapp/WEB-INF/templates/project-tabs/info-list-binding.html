<!--

        This file is part of the Squashtest platform.
        Copyright (C) Henix, henix.fr

        See the NOTICE file distributed with this work for additional
        information regarding copyright ownership.

        This is free software: you can redistribute it and/or modify
        it under the terms of the GNU Lesser General Public License as published by
        the Free Software Foundation, either version 3 of the License, or
        (at your option) any later version.

        this software is distributed in the hope that it will be useful,
        but WITHOUT ANY WARRANTY; without even the implied warranty of
        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
        GNU Lesser General Public License for more details.

        You should have received a copy of the GNU Lesser General Public License
        along with this software.  If not, see <http://www.gnu.org/licenses/>.

-->
<div xmlns:th="http://www.w3.org/1999/xhtml">

  <div id="parameters-panel-container" class="sq-tg expand ">
    <div class="tg-head">
      <h3 th:text="#{tabs.label.infoList}"></h3>
    </div>
    <div id="parameters-panel" class="tg-body" th:title="#{tabs.label.infoList}">
      <div class="display-table" id="info-list-binding-table">
        <div class="display-table-row controls control-group">
          <label for="info-list-category" class="control-label display-table-cell" th:text="#{label.info-list.category}">
            Requirement workspace - Category
          </label>
          <div id="info-list-category" class="display-table-cell"
               th:text="${#messages.msgOrNull(proj.requirementCategories.label)} ?:${proj.requirementCategories.label}">
            category
          </div>
        </div>
        <div class="display-table-row controls control-group">
          <label for="info-list-nature" class="control-label display-table-cell" th:text="#{label.info-list.nature}">
            Test case workspace - Nature
          </label>
          <div id="info-list-nature" class="display-table-cell"
               th:text="${#messages.msgOrNull(proj.testCaseNatures.label)} ?: ${proj.testCaseNatures.label}">
            nature
          </div>
        </div>
        <div class="display-table-row controls control-group">
          <label for="info-list-type" class="control-label display-table-cell" th:text="#{label.info-list.type}">
            Test case workspace - Type
          </label>
          <div id="info-list-type" class="display-table-cell"
               th:text="${#messages.msgOrNull(proj.testCaseTypes.label)} ?: ${proj.testCaseTypes.label}">
            type
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<div id="change-list-popup" class="popup-dialog not-displayed" th:title="#{dialog.project.info-list.change.title}">

  <div class="display-table-row">
    <span id="warning-message" th:text="#{dialog.project.info-list.change}"></span>
    <br/>
    <span th:if="${isTemplate}" class="red-warning-message" th:text="#{dialog.project.info-list.change.warningForTemplate}"></span>
    <br/>
    <span class="red-warning-message" id="warning-index" th:text="#{dialog.info-list.warning.reindex.before}"></span>
  </div>
  <div class="popup-dialog-buttonpane">
    <input type="button" th:value="#{label.Confirm}" data-def="mainbtn,evt=confirm" />
    <input type="button" th:value="#{label.Cancel}" data-def="evt=cancel"/>
  </div>

</div>

<div id="change-list-popup-after" class="popup-dialog not-displayed" th:title="#{dialog.project.info-list.change.title}">

  <div class="display-table-row">
    <span class="red-warning-message" id="warning-index-after" th:text="#{dialog.info-list.warning.reindex.after}"></span>
  </div>
  <div class="popup-dialog-buttonpane">
    <input th:if="${sec.hasRole('ROLE_ADMIN')}" type="button" th:value="#{label.GotoIndex}" data-def="evt=confirm" />
    <input type="button" th:value="#{label.Close}" data-def="mainbtn, evt=cancel"/>
  </div>

</div>

<script type="text/javascript" th:inline="javascript">
/*<![CDATA[*/

  requirejs.config({
    config : {
      'projects-manager/info-list/info-list-binding' : {
        urls: {},
        data: {
          project: {
            id: /*[[${proj.id}]]*/ 0,
            infoListsAreModifiable: /*[[${!isBoundToATemplate}]]*/ false
          },
          lists : {
            category:/*[[${category}]]*/ [],
            type:/*[[${type}]]*/ [],
            nature: /*[[${nature}]]*/ []
          }
        }
      }
    }
  });

  require(["common"], function() {
    require(["projects-manager/info-list/info-list-binding"], function(){});
  });

/*]]>*/
</script>
