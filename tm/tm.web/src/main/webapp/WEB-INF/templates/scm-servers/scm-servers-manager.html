<!--

        This file is part of the Squashtest platform.
        Copyright (C) Henix, henix.fr

        See the NOTICE file distributed with this work for additional
        information regarding copyright ownership.

        This is free software: you can redistribute it and/or modify
        it under the terms of the GNU Lesser General Public License as published by
        the Free Software Foundation, either version 3 of the License, or
        (at your option) any later version.

        this software is distributed in the hope that it will be useful,
        but WITHOUT ANY WARRANTY; without even the implied warranty of
        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
        GNU Lesser General Public License for more details.

        You should have received a copy of the GNU Lesser General Public License
        along with this software.  If not, see <http://www.gnu.org/licenses/>.

-->
<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-transitional-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
  <title th:text="#{label.scmServersList}">Liste des serveurs de gestion de code source</title>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <!-- default header name is X-CSRF-TOKEN -->
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <!-- ... -->
  <style th:include="admin/admin-subpage.frag:: subpage-css" th:remove="tag"></style>

  <script th:remove="all" type="text/javascript" src="../../scripts/lib/jquery/jquery-1.8.3.min.js"></script>
  <script th:remove="all" type="text/javascript" src="../../js/thymol.js"></script>
  <script type="text/javascript" th:inline="javascript">
    var squashtm = {};
    squashtm.app = {
      contextRoot : /*[[ @{/} ]]*/"http://localhost:8080/squash",
      ckeditorSettings : {
        ckeditor : {
          customConfig : /*[[ @{/styles/ckeditor/ckeditor-config.js} ]]*/'http://localhost:8080/squash/styles/ckeditor/ckeditor-config.js',
          language : /*[[#{rich-edit.language.value}]]*/'en'
        },
        placeholder : /*[[#{rich-edit.placeholder}]]*/'Click to edit ...',
        submit : /*[[#{rich-edit.button.ok.label}]]*/'OK',
        cancel : /*[[#{label.Cancel}]]*/'Cancel',
        indicator : '<div class="processing-indicator"/>'
      },
      messages: {
        "message.notBlank": /*[[ #{message.notBlank} ]]*/ "Value should not be blank",
      },
    };
  </script>
  <script src="../../scripts/pubsub-boot.js" th:src="@{/scripts/pubsub-boot.js}"></script>
  <script data-main="../../scripts/scm-servers-manager.js"
    th:attr="data-main=@{/scripts/scm-servers-manager.js}" src="../../scripts/require.js"
    th:src="@{/scripts/require-min.js}">

  </script>
</head>
<body>
  <div id="navigation" th:include="navbar.frag :: navbar('')">NAVBAR</div>
  <div id="workspace">
    <div id="workspace-title">
      <div class="snap-left">
        <h2 th:text="#{label.administration}" class="admin">Administration</h2>
      </div>
      <div class="snap-right">
        <div class="main-menubar " th:include="menubar.frag :: menubar">MENUBAR</div>
        <div class="unstyled-notification-pane" th:include="menubar.frag :: notification">NOTIFICATION</div>
      </div>
    </div>
    <div id="sub-page" class="sub-page">

      <div id="sub-page-header" class="sub-page-header">

        <div id="sub-page-title" class="sub-page-title">
          <h2 th:text="#{title.scmServersManagement}">
            Serveurs de Gestion de Code Source
          </h2>
        </div>

        <div id="sub-page-buttons" class="sub-page-buttons">
          <input id="back" type="button" class="sq-btn" th:value="#{label.Back}" value="Retour" />
        </div>

        <div class="unsnap"></div>
      </div>

      <div id="sub-page-content" class="sub-page-content">
        <div class="fragment-body unstyled">
          <!-- ==================== Table ==================== -->
          <div id="scm-server-table-pane">
            <div class="toolbar">
              <!-- The labels below are suitable for general servers. We could change the keys to make them more general. -->
              <button class="snap-right sq-btn" type="button" value="Delete server" th:value="#{label.testAutomationServer.delete}"
                    th:title="#{label.testAutomationServer.delete}"   id="delete-scm-server">
                <span class="ui-icon ui-icon-trash">-</span><span th:text="#{label.Delete}"/>
              </button>
	            <button class="snap-right sq-btn" type="button" value="Add server" th:value="#{label.testAutomationServer.add}"
	           	  th:title="#{label.testAutomationServer.add}"   id="add-scm-server">
				        <span class="ui-icon ui-icon-plus">+</span><span th:text="#{label.Add}"/>
				      </button>
 			      </div>
	          <div class="unsnap"></div>
            <div>
              <table id="scm-server-table"
                th:attr="data-def='pre-sort=2-asc, pre-filled, datakeys-id=entity-id'">
                <thead>
                  <tr>
                    <th th:attr="data-def='invisible, map=entity-id'" class="not-displayed">Id</th>
                    <th th:attr="data-def='select, map=entity-index'">#</th>
                    <th th:attr="data-def='sortable, map=name'" th:text="#{label.Name}">Name</th>
                    <th th:attr="data-def='sortable, map=kind'" th:text="#{label.Kind}">Kind</th>
                    <th th:attr="data-def='sortable, map=url, link-new-tab={url}'" th:text="#{label.Url}">Url</th>
                    <th th:attr="data-def='delete-button=#remove-scm-server-confirm-dialog , map=empty-delete-holder'"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr th:each="server, iterStat : ${scmServers}" th:object="${server}">
                    <td th:text="*{id}" class="not-displayed">1</td>
                    <td th:text="${iterStat.count}">1</td>
                    <td th:text="*{name}">The_Project Github Server</td>
                    <td th:text="*{kind}">Git</td>
                    <td th:text="*{url}">https://github.com/TheProject</td>
                    <td></td>
                  </tr>
                  <tr th:remove="all">
                    <td class="not-displayed">1</td>
                    <td>The_Project Github Server</td>
                    <td>Git</td>
                    <td>https://github.com/TheProject</td>
                    <td class="delete-button"></td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
