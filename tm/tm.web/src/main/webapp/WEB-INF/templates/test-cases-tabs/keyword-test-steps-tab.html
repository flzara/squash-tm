<!--

        This file is part of the Squashtest platform.
        Copyright (C) Henix, henix.fr

        See the NOTICE file distributed with this work for additional
        information regarding copyright ownership.

        This is free software: you can redistribute it and/or modify
        it under the terms of the GNU Lesser General Public License as published by
        the Free Software Foundation, either version 3 of the License, or
        (at your option) any later version.

        this software is distributed in the hope that it will be useful,
        but WITHOUT ANY WARRANTY; without even the implied warranty of
        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
        GNU Lesser General Public License for more details.

        You should have received a copy of the GNU Lesser General Public License
        along with this software.  If not, see <http://www.gnu.org/licenses/>.

-->
<div th:remove="all">
  <!--
        This snippet of html describes the template for the keyword test step panel of the tab panel of a keyword test case.
        Required data :
            - stepsData : a list of KeywordTestSteps.
     -->
</div>

<div id="tab-tc-keyword-test-steps" class="table-tab">

  <div>
    <h4>This is the Keyword Test Step Page.</h4>
  </div>
  <br/>
  <div>
    <label>Add your keyword test step</label>
    <select id="keyword-input">
      <option th:each="keyword : ${keywordList}" th:text="${keyword}">Given</option>
    </select>
    <input id="action-word-input" type="text" placeholder="(255 characters max)" maxlength="255" width="auto"/>
    <button id="add-keyword-test-step-btn" type="submit">Add</button>
  </div>
  <br/>
  <div id="add-keyword-test-step-result"></div>

  <!-- ==================== table definition =================== -->
  <div class="table-tab-wrap jstree-drop" style="position: relative;">
    <table th:id="'keyword-test-step-table-'+${testCase.id}" class="unstyled-table test-steps-table ">
      <thead>
      <tr>
        <th data-def="map=step-index, select">#</th>
        <th th:text="#{label.Keyword}" data-def="map=step-keyword"> </th>
        <th th:text="#{label.action}" data-def="map=step-action-word, sortable"> </th>
        <th th:attr="data-def='delete-button, map=empty-delete-holder'"></th>
      </tr>
      </thead>
      <tbody>
      <!-- eager-loaded through data property of table -->
      </tbody>
    </table>

    <!-- script -->
    <br/>
    <div>
      <span>Generated script:</span>
      <br/>
      <br/>
      <div style="background-color:#FDFDFD;">
        <span style="font-family: monospace; font-size:20px;" th:utext="${#strings.replace(#strings.escapeXml(generated_script),'&#10;','&lt;br&gt;')}"></span>
      </div>

    </div>
  </div>
  <!-- ==================== /table definition =================== -->

  <script type="text/javascript" th:inline="javascript">
  /*<![CDATA[*/
  requirejs.config({
    waitSeconds: 0
  });
  require([ "common" ], function(common) {
    require(["domReady", "test-case-management"], function(domReady, testCaseManagement){
      domReady(function(){

        var settings = {
          stepData : /*[[${stepData}]]*/[],
          testCaseId : /*[[${testCase.id}]]*/1,
          language : {},
          permissions : {}
        };
        testCaseManagement.initKeywordTestStepTablePanel(settings);
      });
    });
  });
  /*]]>*/
</script>

</div>
